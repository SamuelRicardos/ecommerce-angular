<!-- HEADER -->
<mat-toolbar color="primary" class="header-toolbar">
  <span class="mat-headline-small header-title">
    <mat-icon>storefront</mat-icon> ShopPrime
  </span>
  <span class="spacer"></span>

  <button mat-icon-button aria-label="Carrinho">
    <mat-icon>shopping_cart</mat-icon>
  </button>
  <button mat-icon-button aria-label="Usuário">
    <mat-icon>person</mat-icon>
  </button>
</mat-toolbar>

<!-- MAIN -->
<main class="main-container">
  <h1 class="mat-headline-medium title-main">Gerenciar Produtos</h1>

  <!-- FORMULÁRIO -->
  <form (ngSubmit)="salvarProduto()" class="produto-form">
    <mat-card>
      <mat-card-content>
        <mat-form-field appearance="outline">
          <mat-label>Nome do Produto</mat-label>
          <input matInput [(ngModel)]="produtoAtual.nome" name="nome" required />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Código</mat-label>
          <input matInput [(ngModel)]="produtoAtual.codigo" name="codigo" required />
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Preço</mat-label>
          <input matInput type="number" step="0.01" [(ngModel)]="produtoAtual.preco" name="preco" required />
        </mat-form-field>
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-flat-button color="primary" type="submit">
          {{ editando ? 'Atualizar' : 'Cadastrar' }}
        </button>
        <button mat-stroked-button type="button" (click)="resetarFormulario()">
          Cancelar
        </button>
      </mat-card-actions>
    </mat-card>
  </form>

  <!-- LISTAGEM -->
  <section class="produtos-list">
    <h2 class="mat-title">Produtos cadastrados</h2>
    <mat-divider></mat-divider>

    <ng-container *ngFor="let p of produtos">
      <mat-card>
        <mat-card-content>
          <div class="produto-info">
            <h3 class="mat-subheading-1">{{ p.nome }} (Código: {{ p.codigo }})</h3>
            <p class="mat-body-2">Preço: R$ {{ p.preco }}</p>
          </div>
          <div class="produto-actions">
            <button mat-icon-button color="primary" (click)="editarProduto(p)" aria-label="Editar">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="deletarProduto(p.id)" aria-label="Remover">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </ng-container>
  </section>
</main>

<!-- FOOTER -->
<mat-toolbar color="primary" role="contentinfo" class="footer-toolbar">
  <div>
    <p class="mat-caption">&copy; 2025 ShopPrime. Todos os direitos reservados.</p>
  </div>
</mat-toolbar>
